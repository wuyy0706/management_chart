# 工单管理与图表展示页面

## 项目概述

这是一个基于 Vue 3 + TypeScript + Ant Design Vue + ECharts 的工单管理系统，实现了登录权限控制、工单列表展示、图表数据可视化等功能。

## 技术栈

- **框架**: Vue 3 (Composition API)
- **语言**: TypeScript
- **UI 组件库**: Ant Design Vue 4.x
- **图表库**: ECharts 5.x
- **样式**: Less
- **构建工具**: Vite

## 功能特性

### 1. 登录页面

- 用户名/密码登录表单
- 权限控制逻辑：
  - 用户名为 `admin` → 管理员权限
  - 其他用户名 → 普通用户权限
- 登录后跳转到工单管理页面

### 2. 工单管理页面

- **统计卡片**: 显示总工单数、总工时、加班工单数、项目数量
- **工单列表**: 表格展示工单数据，包含 ID、项目、加班状态、工时、创建时间
- **权限控制**:
  - 管理员可以看到删除按钮
  - 普通用户只能查看，不能删除
- **数据联动**: 删除工单后，图表自动更新

### 3. 图表展示

- **标题**: Project Hours Distribution
- **类型**: 柱状图
- **数据**: 按项目名称分组，统计累计工时
- **交互**: 鼠标悬停显示详细工时信息

## 项目结构

```
src/
├── views/
│   ├── HomeView.vue          # 登录页面
│   └── AboutView.vue        # 工单管理页面
├── router/
│   └── index.ts             # 路由配置
├── main.ts                  # 应用入口
└── env.d.ts                 # 类型声明
```

## 模拟数据

项目使用需求文档提供的模拟数据：

```json
[
  {
    "id": "001",
    "project": "Road Project A",
    "overtime": true,
    "hours": 3.5,
    "created_at": "2024-04-10 10:30"
  },
  {
    "id": "002",
    "project": "Bridge Maintenance B",
    "overtime": false,
    "hours": 2,
    "created_at": "2024-04-09 13:00"
  }
  // ... 更多数据
]
```

## 权限控制逻辑

| 功能         | 管理员（admin） | 普通用户 |
| ------------ | --------------- | -------- |
| 查看工单表格 | ✅              | ✅       |
| 删除工单     | ✅              | ❌       |
| 查看图表     | ✅              | ✅       |

## 开发说明

### AI 工具使用情况

本项目在开发过程中使用了以下 AI 工具：

1. **Cursor AI**: 用于代码生成和重构
2. **ChatGPT**: 用于问题解决和代码优化建议

### AI 辅助生成的代码

- **类型声明**: `env.d.ts` 中的 Ant Design Vue 组件类型声明
- **图表配置**: ECharts 配置选项的生成和优化
- **样式优化**: 响应式设计和交互效果的实现

### 手动修改的部分

- **业务逻辑**: 登录验证、权限控制、数据联动逻辑
- **数据结构**: 工单数据的组织和管理
- **路由配置**: 页面跳转和权限验证

## 项目亮点

1. **完整的权限控制**: 实现了基于角色的访问控制
2. **数据联动**: 表格操作会实时更新图表显示
3. **响应式设计**: 适配不同屏幕尺寸
4. **类型安全**: 完整的 TypeScript 类型定义
5. **用户体验**: 流畅的交互和美观的界面

## 运行项目

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 类型检查
npm run type-check

# 构建生产版本
npm run build
```

## 测试账号

- **管理员**: admin / admin
- **普通用户**: wuxingyu / 123456

## 技术难点与解决方案

### 1. TypeScript 类型声明

**难点**: Ant Design Vue 组件的类型支持
**解决方案**: 在 `env.d.ts` 中自定义类型声明

### 2. 图表数据联动

**难点**: 删除工单后图表数据同步更新
**解决方案**: 使用计算属性和响应式数据，删除后调用 `updateChart()` 方法

### 3. 权限控制

**难点**: 基于角色的界面元素显示控制
**解决方案**: 使用 `v-if` 指令和计算属性动态控制组件显示

## 项目总结

本项目成功实现了需求文档中的所有功能要求，包括：

- ✅ 登录页面和权限控制
- ✅ 工单列表展示
- ✅ 图表数据可视化
- ✅ 权限控制逻辑
- ✅ 数据联动功能

项目代码结构清晰，类型安全，具有良好的可维护性和扩展性。
